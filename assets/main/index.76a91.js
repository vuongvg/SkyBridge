window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var l=c.split("/");if(l=l[l.length-1],!e[l]){var a="function"==typeof __require&&__require;if(!s&&a)return a(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+c+"'")}c=l}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AchievementComponent:[function(t,e,o){"use strict";cc._RF.push(e,"f8a6ecNs35DSJwUnxqHCSBH","AchievementComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=t("../Global"),l=t("./DialogComponent"),a=cc._decorator,p=a.ccclass,u=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._achievementsNode=[],e._achievementsTotal=null,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._achievementsNode=this._contentDialogNode.children,this._achievementsTotal=this._openDialogBtnNode.getComponentInChildren(cc.Label),c.eventTarget.on(c.ADD_ACHIEVEMENT,this.onAddAchievement,this)},e.prototype.start=function(){this.setAchievementsTotal()},e.prototype.onAddAchievement=function(){this.setAchievementsTotal(),cc.tween(this._openDialogBtnNode).to(.2,{scale:1.2}).delay(.3).to(.2,{scale:.9}).to(.2,{scale:1}).start()},e.prototype.setAchievementsTotal=function(){this._achievementsTotal.string=""+s.Global.highLevel},e.prototype.onOpenDialogClick=function(){t.prototype.onOpenDialogClick.call(this),this._achievementsNode.forEach(function(t,e){t.color=e<s.Global.highLevel?cc.Color.WHITE:new cc.Color(88,88,88,55)})},r([p],e)}(l.default));o.default=u,cc._RF.pop()},{"../Events":"Events","../Global":"Global","./DialogComponent":"DialogComponent"}],AchievementPopup:[function(t,e,o){"use strict";cc._RF.push(e,"ae28fcHCDxF06UhP+1xYh+U","AchievementPopup");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=cc._decorator,l=s.ccclass,a=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteFrames=[],e._avatar=null,e}return i(e,t),e.prototype.onLoad=function(){this._avatar=this.getComponentInChildren(cc.Sprite),c.eventTarget.on(c.SHOW_ACHIEVEMENT,this.showAchievement,this),this.node.active=!1},e.prototype.showAchievement=function(t){var e=this;this._avatar.spriteFrame=this.spriteFrames[t],this.node.active=!0,this.node.scale=.1,this.node.position=cc.v3(),cc.tween(this.node).to(.3,{scale:1}).delay(1).to(.3,{scale:.1,position:cc.v3(174,320)}).call(function(){e.node.active=!1,c.eventTarget.emit(c.ADD_ACHIEVEMENT)}).start()},r([a([cc.SpriteFrame])],e.prototype,"spriteFrames",void 0),r([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Events":"Events"}],BridgeController:[function(t,e,o){"use strict";cc._RF.push(e,"7f151LSnAdPb7dd9AUStQpN","BridgeController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=t("../Global"),l=t("./Bridge"),a=cc._decorator,p=a.ccclass,u=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bridgePrefab=null,e._lengthBridge=0,e._isPress=!1,e._currentBridge=null,e._currentBridgeScript=null,e._graPhics=null,e.GROW=4,e}return i(e,t),e.prototype.onLoad=function(){c.eventTarget.on(c.RESET_GAME,this.resetBridge,this),c.eventTarget.on(c.RESUME_GAME,this.resetBridge,this),c.eventTarget.on(c.TOUCH_START,this.createBridge,this),c.eventTarget.on(c.TOUCH_END,this.onBridge,this),c.eventTarget.on(c.DROP_BRIDGE,this.dropBridge,this),this._graPhics=this.node.getComponent(cc.Graphics),this._graPhics.lineWidth=5,this._graPhics.strokeColor=cc.Color.WHITE,this.initPool()},e.prototype.initPool=function(){for(var t=0;t<4;t++){var e=cc.instantiate(this.bridgePrefab);e.position=cc.v3(0,-1e3),e.parent=this.node,e.setContentSize(e.getContentSize().width,0)}},e.prototype.resetBridge=function(){this._isPress=!1,this._currentBridge=null,this.node.children.forEach(function(t){t.height=0,t.position=cc.v3(0,-1e3)})},e.prototype.createBridge=function(){this._isPress=!0,this._lengthBridge=0;var t=this.node.children;this._currentBridge=t[t.length-1],this._currentBridgeScript=this._currentBridge.getComponent(l.default),this._currentBridgeScript.init(),c.eventTarget.emit(c.BRIDGE_SOUND)},e.prototype.update=function(){this._isPress&&this._currentBridge&&(s.Global.getMaxDistanceX()+10<this._lengthBridge||(c.eventTarget.emit(c.SET_PROGRESS_BAR,this._lengthBridge),this._lengthBridge+=this.GROW,this._currentBridgeScript.growBridge(this._lengthBridge)))},e.prototype.drawCircle=function(t,e){this._graPhics.clear(),this._graPhics.circle(t.x,t.y,e),this._graPhics.stroke()},e.prototype.onBridge=function(){if(this._isPress=!1,this._lengthBridge<40)return s.Global.isGamePlaying=!0,void(this._currentBridge.position=cc.v3(0,-1e3));this._currentBridgeScript.onBridge(this._lengthBridge),c.eventTarget.emit(c.HIDE_PROGRESS_BAR)},e.prototype.dropBridge=function(){this._isPress=!1,this._currentBridgeScript.dropBridge(this._lengthBridge)},r([u(cc.Prefab)],e.prototype,"bridgePrefab",void 0),r([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Events":"Events","../Global":"Global","./Bridge":"Bridge"}],Bridge:[function(t,e,o){"use strict";cc._RF.push(e,"97a1bpKiGlLKZ0RKtVF9nE/","Bridge");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=t("../Global"),l=cc._decorator,a=l.ccclass,p=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.spriteRotation=null,e.START_ANGLE=-30,e.START_SKEW=-30,e.END_SKEW=30,e.DROP_SKEW=80,e._collider=null,e._allNameColliders=["OkColliderDown","GoodColliderDown","PrefectCollider","GoodColliderUp","OkColliderUp","OutSide"],e._bonusArr=[1,1,1,-1,-1,-2],e._allColliders=[],e._bonus=0,e._offset=Math.sqrt(3)/2,e._avt=null,e}return i(e,t),e.prototype.onLoad=function(){this._collider=this.getComponent(cc.BoxCollider)},e.prototype.init=function(){this._avt=this.getComponent(cc.Sprite),this._avt.spriteFrame=s.Global.dirX>0?this.sprite:this.spriteRotation,this._collider.enabled=!0,this._allColliders=[],this._bonus=0,this.node.setSiblingIndex(0),this.node.height=0,this.node.angle=s.Global.dirX*this.START_ANGLE,this.node.skewX=s.Global.dirX*this.START_SKEW,this.node.opacity=255,this.node.position=s.Global.getBridgePos()},e.prototype.growBridge=function(t){this.node.height=t,this._collider.size.height=t,this._collider.offset.y=t/2},e.prototype.onBridge=function(t){var e=this,o=s.Global.dirX;cc.tween(this.node).to(.15,{height:1.2*t,skewX:o*this.START_SKEW*.5}).to(.1,{height:1.1*t,skewX:o*this.END_SKEW*.5}).to(.05,{height:t,skewX:o*this.END_SKEW}).call(function(){0==e._bonus&&(e.node.height-=3),e._bonus<0&&(e.node.height+=10),e._bonus>0&&(e._collider.enabled=!1),c.eventTarget.emit(c.CHECK_GAME_OVER,e._bonus,e),c.eventTarget.emit(c.BRIDGE_HIT_SOUND)}).start()},e.prototype.dropBridge=function(t){var e=this;cc.tween(this.node).delay(.5).to(.3,{height:.15*t,skewX:s.Global.dirX*this.DROP_SKEW}).call(function(){e.node.opacity=0}).start()},e.prototype.onShake=function(){cc.tween(this.node).by(.1,{angle:-1}).by(.1,{angle:1}).call(function(){return c.eventTarget.emit(c.NEXT_LEVEL)}).start()},e.prototype.onCollisionEnter=function(t){var e=this;this._allNameColliders.find(function(o,n){t.node.name.includes(o)&&!e._allColliders.includes(o)&&(e._allColliders.push(o),e._bonus+=e._bonusArr[n])})},r([p(cc.SpriteFrame)],e.prototype,"sprite",void 0),r([p(cc.SpriteFrame)],e.prototype,"spriteRotation",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Events":"Events","../Global":"Global"}],Brother:[function(t,e,o){"use strict";cc._RF.push(e,"4c5bc5FVuhBwLyFOGIvxvMg","Brother");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=t("../Global"),l=cc._decorator,a=l.ccclass,p=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hatNode=null,e.movePos=[],e._animation=null,e}return i(e,t),e.prototype.init=function(t,e){var o=this;this.hatNode.active=!1,this.node.parent=t,this.node.position=e,this.node.scaleX=.6*s.Global.dirX,this.node.opacity=0,this.scheduleOnce(function(){o.node.opacity=255},.2),c.eventTarget.on(c.BROTHER_START_TWEEN,this.startTween,this),this._animation=this.node.getComponent(cc.Animation),this.setIdleAnim()},e.prototype.startTween=function(t){var e=this,o=this.node.getSiblingIndex(),n=cc.tween(this.node).delay(.05*(o+1));this.movePos.forEach(function(o){n=n.sequence(cc.tween().call(function(){e.node.scaleX=e.node.position.x>o.x?-.6:.6}),cc.tween().to(t,{position:o},{easing:"linear"}))}),n.call(function(){return e.setIdleAnim()}).start(),this.setMoveAnim()},e.prototype.setMoveAnim=function(){this._animation.play("player-move")},e.prototype.setIdleAnim=function(){this._animation.play("player-idle")},r([p(cc.Node)],e.prototype,"hatNode",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Events":"Events","../Global":"Global"}],Building:[function(t,e,o){"use strict";cc._RF.push(e,"95c18R1NvxLoZYdINvNUFnk","Building");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Enums"),s=t("../Global"),l=cc._decorator,a=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.points=[],e.buildingType=c.BuildingType.Medium,e._collider=[],e._dirs=[cc.v3(1,1),cc.v3(-1,1),cc.v3(1,-1),cc.v3(-1,-1)],e}return i(e,t),e.prototype.getSizeUpFace=function(){return 2*cc.Vec3.distance(cc.v3(),s.Global.bridgePoints[this.buildingType])},e.prototype.getBridgePosX=function(){return s.Global.bridgePoints[this.buildingType].x},e.prototype.init=function(t,e,o){var n=this;this.node.parent=t,this.node.position=e,this.buildingType=Math.floor(o/5);var i=s.Global.bridgePoints[this.buildingType],r=this.node.getComponentsInChildren(cc.Sprite),c=r[0],l=r.slice(1),a=l.slice(4,6)[0],p=s.Global.dirX>0,u=a.node.angle,h=a.node.skewX,_=s.Global.spriteFramesBuilding[o],d=s.Global.spriteFramesUpFace[o%5];a.node.active=Boolean(d),a.node.angle=p?-Math.abs(u):Math.abs(u),a.node.skewX=p?Math.abs(h):-Math.abs(h),a.node.position=cc.v3(),a.spriteFrame=d,c.node.setAnchorPoint(s.Global.anchors[this.buildingType]),c.spriteFrame=_,l.slice(0,4).forEach(function(t,e){t.node.position=i.clone().multiply(n._dirs[e]),n.points.push(t.node)});var f=(cc.Vec3.distance(l[0].node.position,l[3].node.position)-65)/2;this._collider=a.getComponentsInChildren(cc.BoxCollider),this._collider.forEach(function(t){return t.enabled=!0});var g=this._collider,v=g[0],y=g[1],O=(g[2],g[3],g[4],g[5]);y.offset.y=32.5+f/2,O.offset.y=-32.5-f/2,v.offset.y=32.5+2*f,y.size.height=f,O.size.height=f,v.size.height=2*f,cc.tween(this.node).by(.2,{position:cc.v3(0,10)}).by(.2,{position:cc.v3(0,-10)}).to(.2,{position:e}).start()},e.prototype.hideCollider=function(){this._collider.forEach(function(t){return t.enabled=!1})},e.prototype.onShake=function(){var t=this.node.position.clone(),e=cc.v3(t.x,t.y-10);cc.tween(this.node).to(.1,{position:e}).to(.1,{position:t}).start()},r([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../Enums":"Enums","../Global":"Global"}],CollectableController:[function(t,e,o){"use strict";cc._RF.push(e,"75ee26ibdVIs4NkVk0JT9dZ","CollectableController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Enums"),s=t("../Events"),l=t("../Global"),a=t("../LocalStorage"),p=cc._decorator,u=p.ccclass,h=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteFrames=[],e.scaleNode=null,e.haloNode=null,e.avatar=null,e._type=c.CollectableType.None,e}return i(e,t),e.prototype.onLoad=function(){var t=this;s.eventTarget.on(s.INIT_COLLECTABLE,this.initCollectable,this),s.eventTarget.on(s.RESET_GAME,this.onReset,this),s.eventTarget.on(s.CHECK_COLLECTABLE,this.checkCollectable,this),this.hideCollectable(),this.scaleNode.children.forEach(function(e){var o=.1*l.Global.getRandomInt(5,10),n=l.Global.getRandomInt(.5,1);t.scaleAnim(e,o,n)});var e=this.haloNode.children,o=e[0],n=e[1],i=e[2];this.scaleHalo(o,3.2),this.scaleHalo(n,1.7),this.scaleHalo(i,1.5)},e.prototype.onReset=function(){this.hideCollectable()},e.prototype.hideCollectable=function(){cc.Tween.stopAllByTarget(this.node),this.node.position=cc.v3(0,-1e3)},e.prototype.checkCollectable=function(){this.hideCollectable(),this._type==c.CollectableType.Coin&&(l.Global.coinsTotal++,a.LocalStorage.setCoin(l.Global.coinsTotal)),this._type==c.CollectableType.Present&&(l.Global.presentsTotal++,a.LocalStorage.setPresent(l.Global.presentsTotal)),s.eventTarget.emit(s.SET_COIN),s.eventTarget.emit(s.SET_PRESENT_TOTAL)},e.prototype.initCollectable=function(t){if(0==l.Global.getRandomInt(0,5))return this._type=c.CollectableType.None,void(this.node.position=cc.v3(0,-1e3));this._type=l.Global.getRandomInt(0,this.spriteFrames.length),this.avatar.spriteFrame=this.spriteFrames[this._type%this.spriteFrames.length],cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).repeatForever(cc.tween(this.node).to(0,{position:t}).by(1,{position:cc.v3(0,50)}).by(1,{position:cc.v3(0,-50)})).start(),cc.tween(this.node).to(.1,{scale:.1}).to(.25,{scale:.5}).to(.1,{scale:.4}).to(.25,{scale:.5}).start()},e.prototype.scaleAnim=function(t,e,o){void 0===e&&(e=1),void 0===o&&(o=1),cc.tween(t).repeatForever(cc.tween(t).to(o,{scale:e}).to(o,{scale:e/2})).start()},e.prototype.scaleHalo=function(t,e){void 0===e&&(e=1),cc.tween(t).repeatForever(cc.tween(t).to(0,{opacity:255}).to(0,{scale:.74}).to(e,{scale:1}).to(.7*e,{opacity:0})).start()},r([h([cc.SpriteFrame])],e.prototype,"spriteFrames",void 0),r([h(cc.Node)],e.prototype,"scaleNode",void 0),r([h(cc.Node)],e.prototype,"haloNode",void 0),r([h(cc.Sprite)],e.prototype,"avatar",void 0),r([u],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../Enums":"Enums","../Events":"Events","../Global":"Global","../LocalStorage":"LocalStorage"}],DialogComponent:[function(t,e,o){"use strict";cc._RF.push(e,"f3d45SvKFJOJryaNb3uAHJG","DialogComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._openDialogBtnNode=null,e._dialogNode=null,e._maskDialogNode=null,e._bgDialogNode=null,e._closeDialogBtnNode=null,e._contentDialogNode=null,e}return i(e,t),e.prototype.onLoad=function(){var t,e;t=this.node.children,this._openDialogBtnNode=t[0],this._dialogNode=t[1],e=this._dialogNode.children,this._maskDialogNode=e[0],this._bgDialogNode=e[1],this._closeDialogBtnNode=e[2],this._contentDialogNode=e[3],this._openDialogBtnNode.on("click",this.onOpenDialogClick,this),this._closeDialogBtnNode.on("click",this.onCloseDialogBtnClick,this),this._maskDialogNode.on(cc.Node.EventType.TOUCH_START,this.onCloseDialogBtnClick,this),this._dialogNode.position=cc.v3(),this._dialogNode.active=!1},e.prototype.onOpenDialogClick=function(){this.node.setSiblingIndex(-1),this._dialogNode.active=!0},e.prototype.onCloseDialogBtnClick=function(){this._dialogNode.active=!1},r([s],e)}(cc.Component));o.default=l,cc._RF.pop()},{}],Enums:[function(t,e,o){"use strict";cc._RF.push(e,"c50b9zv7O9JoKK52uY5dJ9p","Enums"),Object.defineProperty(o,"__esModule",{value:!0}),o.BonusType=o.CollectableType=o.BuildingType=void 0,function(t){t[t.Medium=0]="Medium",t[t.Small=1]="Small",t[t.Large=2]="Large"}(o.BuildingType||(o.BuildingType={})),function(t){t[t.Present=0]="Present",t[t.Coin=1]="Coin",t[t.None=2]="None"}(o.CollectableType||(o.CollectableType={})),function(t){t[t.OutSide=-1]="OutSide",t[t.Fail=0]="Fail",t[t.Ok=1]="Ok",t[t.Good=2]="Good",t[t.Perfect=3]="Perfect"}(o.BonusType||(o.BonusType={})),cc._RF.pop()},{}],Events:[function(t,e,o){"use strict";cc._RF.push(e,"6cdd6WUrBtHbafbvNBsiIqp","Events"),Object.defineProperty(o,"__esModule",{value:!0}),o.BRIDGE_HIT_SOUND=o.PERFECT_SOUND=o.OK_SOUND=o.GOOD_SOUND=o.MOVE_SOUND=o.FAIL_SOUND=o.HIT_COIN_SOUND=o.BRIDGE_SOUND=o.BUILDING_SOUND=o.BG_SOUND=o.SET_PRESENT_TOTAL=o.SET_COIN=o.ADD_ACHIEVEMENT=o.SHOW_ACHIEVEMENT=o.SHOW_PAUSE_POPUP=o.SHOW_CONFIRM_POPUP=o.SHOW_ERROR_POPUP=o.SHOW_NOT_TURNS_POPUP=o.SET_PROGRESS_BAR=o.HIDE_PROGRESS_BAR=o.INIT_PROGRESS_BAR=o.SHOW_BONUS=o.SHOW_MULTIPLY_SCORE=o.SHOW_GAME_OVER=o.SHOW_HOME=o.INIT_BROTHER_ANIM=o.PLAY_HIT_ANIM=o.CHECK_COLLECTABLE=o.INIT_COLLECTABLE=o.BROTHER_START_TWEEN=o.BROTHER_MOVE=o.DROP_PLAYER_OUT_SIDE=o.DROP_PLAYER=o.DROP_BRIDGE=o.MOVE_TO_TARGET=o.INIT_PLAYER=o.SET_HIGH_SCORE=o.SET_LEVEL=o.SET_SCORE=o.NEXT_LEVEL=o.TOUCH_END=o.TOUCH_START=o.CHECK_GAME_OVER=o.GAME_OVER=o.RESUME_GAME=o.RESET_GAME=o.START_GAME=o.eventTarget=void 0,o.eventTarget=new cc.EventTarget,o.START_GAME="START_GAME",o.RESET_GAME="RESET_GAME",o.RESUME_GAME="RESUME_GAME",o.GAME_OVER="GAME_OVER",o.CHECK_GAME_OVER="CHECK_GAME_OVER",o.TOUCH_START="TOUCH_START",o.TOUCH_END="TOUCH_END",o.NEXT_LEVEL="NEXT_LEVEL",o.SET_SCORE="SET_SCORE",o.SET_LEVEL="SET_LEVEL",o.SET_HIGH_SCORE="SET_HIGH_SCORE",o.INIT_PLAYER="INIT_PLAYER",o.MOVE_TO_TARGET="MOVE_TO_TARGET",o.DROP_BRIDGE="DROP_BRIDGE",o.DROP_PLAYER="DROP_PLAYER",o.DROP_PLAYER_OUT_SIDE="DROP_PLAYER_OUT_SIDE",o.BROTHER_MOVE="BROTHER_MOVE",o.BROTHER_START_TWEEN="BROTHER_START_TWEEN",o.INIT_COLLECTABLE="INIT_COLLECTABLE",o.CHECK_COLLECTABLE="CHECK_COLLECTABLE",o.PLAY_HIT_ANIM="PLAY_HIT_ANIM",o.INIT_BROTHER_ANIM="INIT_BROTHER_ANIM",o.SHOW_HOME="SHOW_HOME",o.SHOW_GAME_OVER="SHOW_GAME_OVER",o.SHOW_MULTIPLY_SCORE="SHOW_MULTIPLY_SCORE",o.SHOW_BONUS="SHOW_BONUS",o.INIT_PROGRESS_BAR="INIT_PROGRESS_BAR",o.HIDE_PROGRESS_BAR="HIDE_PROGRESS_BAR",o.SET_PROGRESS_BAR="SET_PROGRESS_BAR",o.SHOW_NOT_TURNS_POPUP="SHOW_NOT_TURNS_POPUP",o.SHOW_ERROR_POPUP="SHOW_ERROR_POPUP",o.SHOW_CONFIRM_POPUP="SHOW_CONFIRM_POPUP",o.SHOW_PAUSE_POPUP="SHOW_PAUSE_POPUP",o.SHOW_ACHIEVEMENT="SHOW_ACHIEVEMENT",o.ADD_ACHIEVEMENT="ADD_ACHIEVEMENT",o.SET_COIN="SET_COIN",o.SET_PRESENT_TOTAL="SET_PRESENT_TOTAL",o.BG_SOUND="BG_SOUND",o.BUILDING_SOUND="BUILDING_SOUND",o.BRIDGE_SOUND="BRIDGE_SOUND",o.HIT_COIN_SOUND="HIT_COIN_SOUND",o.FAIL_SOUND="FAIL_SOUND",o.MOVE_SOUND="MOVE_SOUND",o.GOOD_SOUND="GOOD_SOUND",o.OK_SOUND="OK_SOUND",o.PERFECT_SOUND="PERFECT_SOUND",o.BRIDGE_HIT_SOUND="BRIDGE_HIT_SOUND",cc._RF.pop()},{}],GameController:[function(t,e,o){"use strict";cc._RF.push(e,"058a6TnBFVILpDMjdfEruXh","GameController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Enums"),s=t("../Events"),l=t("../Global"),a=t("../LocalStorage"),p=t("./Building"),u=t("./PlayerController"),h=cc._decorator,_=h.ccclass,d=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buildingBlock=null,e.buildingPrefab=null,e.spriteFramesUpFace=[],e.spriteFramesBuilding=[],e._stepY=0,e._stepX=0,e._posX=300,e._posY=-200,e._perfectCount=0,e._playerNode=null,e._buildingCount=1,e._dataSave=new a.DataSave,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,l.Global.spriteFramesBuilding=this.spriteFramesBuilding,l.Global.spriteFramesUpFace=this.spriteFramesUpFace,s.eventTarget.on(s.NEXT_LEVEL,this.nextLevel,this),s.eventTarget.on(s.RESET_GAME,this.resetGame,this),s.eventTarget.on(s.CHECK_GAME_OVER,this.checkGameOver,this),s.eventTarget.on(s.RESUME_GAME,this.resumeGame,this),this.initBuildingPool(),this._playerNode=this.getComponentInChildren(u.default).node,[1,2,3,4,5,6,17,18].forEach(function(t){return console.log(l.Global.getBuildingByLevel(t))})},e.prototype.start=function(){this.getDataFromLocalStorage()},e.prototype.getDataFromLocalStorage=function(){var t=a.LocalStorage.getGameData()||new a.DataSave;this._stepY=t.stepY,this._stepX=t.stepX,this._posY=t.posY,this._posX=t.posX,this._buildingCount=t.buildingCount,this._perfectCount=t.perfectCount,this.node.position=t.gamePosition,this.node.scale=t.scale,l.Global.posStart=t.currentBuilding.pos,l.Global.dirX=t.dirX,l.Global.level=(null==t?void 0:t.level)||1,l.Global.highLevel=(null==t?void 0:t.highLevel)||1,l.Global.highScore=(null==t?void 0:t.highScore)||0,l.Global.score=(null==t?void 0:t.score)||0,l.Global.coinsTotal=a.LocalStorage.getCoin()||0,l.Global.presentsTotal=a.LocalStorage.getPresent()||0,this._dataSave=t,s.eventTarget.emit(s.SET_LEVEL),s.eventTarget.emit(s.SET_HIGH_SCORE),s.eventTarget.emit(s.SET_COIN),s.eventTarget.emit(s.SET_PRESENT_TOTAL)},e.prototype.checkGameOver=function(t,e){var o=l.Global.nextBuilding.node.position,n=l.Global.currentBuilding.node.position;if(t==c.BonusType.Fail){var i=o.clone().add(n).multiplyScalar(.5);return s.eventTarget.emit(s.DROP_PLAYER,i),void s.eventTarget.emit(s.DROP_BRIDGE)}if(s.eventTarget.emit(s.PLAY_HIT_ANIM,l.Global.nextBuilding.node.position),t!=c.BonusType.OutSide){e.onShake(),l.Global.nextBuilding.onShake(),this.showScoreAndBonusUIByScoreBuilding(t);var r=[s.OK_SOUND,s.GOOD_SOUND,s.PERFECT_SOUND];s.eventTarget.emit(s.MOVE_TO_TARGET,o),s.eventTarget.emit(r[t-1])}else s.eventTarget.emit(s.DROP_PLAYER_OUT_SIDE,o)},e.prototype.showScoreAndBonusUIByScoreBuilding=function(t){l.Global.score++,this.setLevelAndHighScore(),s.eventTarget.emit(s.SET_SCORE),s.eventTarget.emit(s.SHOW_MULTIPLY_SCORE,l.Global.level),s.eventTarget.emit(s.SHOW_BONUS,t,this._perfectCount,1)},e.prototype.setLevelAndHighScore=function(){var t=l.Global.getBuildingByLevel(l.Global.level+1);l.Global.score>=t&&l.Global.level++,l.Global.level>l.Global.highLevel&&(l.Global.highLevel=l.Global.level,s.eventTarget.emit(s.SHOW_ACHIEVEMENT,l.Global.highLevel-1)),l.Global.score>=l.Global.highScore&&(l.Global.highScore=l.Global.score,s.eventTarget.emit(s.SET_HIGH_SCORE))},e.prototype.initBuildingPool=function(){for(var t=0;t<6;t++){var e=cc.instantiate(this.buildingPrefab);e.parent=this.buildingBlock,e.getComponentInChildren(cc.Sprite).spriteFrame=null,e.children[e.children.length-1].active=!1}},e.prototype.resumeGame=function(){l.Global.isGamePlaying=!0,l.Global.coinsTotal=a.LocalStorage.getCoin()||0,l.Global.presentsTotal=a.LocalStorage.getPresent()||0,this.initBuildingByDataSave(),this.initLimitedBar(),s.eventTarget.emit(s.INIT_PLAYER),s.eventTarget.emit(s.SET_SCORE),s.eventTarget.emit(s.SET_COIN),s.eventTarget.emit(s.SET_PRESENT_TOTAL)},e.prototype.initBuildingByDataSave=function(){this.buildingBlock.children.forEach(function(t){t.position=cc.v3(0,-1e3)});var t=this._dataSave,e=t.currentBuilding,o=t.nextBuilding,n=e.pos,i=e.style,r=o.pos,c=o.style,s=this.buildingBlock.children[0].getComponent(p.default);s.init(this.buildingBlock,n,i),s.hideCollider(),l.Global.currentBuilding=s;var a=this.buildingBlock.children[1],u=a.getComponent(p.default);u.init(this.buildingBlock,r,c),a.setSiblingIndex(0),l.Global.nextBuilding=u},e.prototype.resetGame=function(){this._dataSave=new a.DataSave,a.LocalStorage.setGameData(this._dataSave),this.getDataFromLocalStorage(),this.resumeGame()},e.prototype.nextLevel=function(){l.Global.currentBuilding=l.Global.nextBuilding;var t=l.Global.currentBuilding.node.position,e=new a.BuildingModel(t,this._dataSave.nextBuilding.style);this._posY+=this._stepY;var o=this.buildingBlock.children[this.buildingBlock.children.length-1];o.children[o.children.length-1].active=!0;var n=o.getComponent(p.default);o.setSiblingIndex(0),l.Global.nextBuilding=n;var i=this.getDataNextBuilding(t),r=i.nextPos,c=i.styleNextBuilding,u=this.scaleGameNode(r,t),h=u.scale,_=u.posGameNode,d=new a.BuildingModel(r,c);this.saveGame(e,d,h,_),n.init(this.buildingBlock,r,c),this.initLimitedBar(),s.eventTarget.emit(s.BUILDING_SOUND)},e.prototype.getDataNextBuilding=function(t){l.Global.dirX*=-1,this._buildingCount++;var e=this._buildingCount<3,o=l.Global.getRandomInt(0,this.spriteFramesBuilding.length),n=(180+l.Global.angle*l.Global.dirX)%180,i=this._posX*Math.min(1+.005*this._buildingCount,1.3),r=this._posX*Math.min(1.4+.01*this._buildingCount,2.6),c=e?l.Global.getRandomInt(.7*this._posX,this._posX):l.Global.getRandomInt(i,r);return{nextPos:this.findNextPoint(t,c,n),styleNextBuilding:o}},e.prototype.scaleGameNode=function(t,e){var o=this._buildingCount<3;this._stepX=o?0:this.node.position.x+(t.x+e.x)/2,this._stepY=o?0:t.y-e.y;var n=o?-200:-400,i=cc.Vec3.distance(cc.v3(t.x),cc.v3(e.x)),r=Math.min(540/(1.4*i),1),c=cc.v3(this.node.position.x-this._stepX,-this._playerNode.position.y+n).multiplyScalar(r);return cc.tween(this.node).to(1,{position:c.clone(),scale:r}).delay(.3).call(function(){return s.eventTarget.emit(s.INIT_COLLECTABLE,l.Global.nextBuilding.node.position)}).start(),{scale:r,posGameNode:c}},e.prototype.saveGame=function(t,e,o,n){this._dataSave={currentBuilding:t,nextBuilding:e,dirX:l.Global.dirX,level:l.Global.level,highLevel:l.Global.highLevel,score:l.Global.score,highScore:l.Global.highScore,scale:o,gamePosition:n,buildingCount:this._buildingCount,perfectCount:this._perfectCount,stepX:this._stepX,stepY:this._stepY,posX:this._posX,posY:this._posY},a.LocalStorage.setGameData(this._dataSave)},e.prototype.initLimitedBar=function(){var t=2*l.Global.bridgePoints[l.Global.nextBuilding.buildingType].x;s.eventTarget.emit(s.INIT_PROGRESS_BAR,l.Global.getMaxDistanceX(),t)},e.prototype.findNextPoint=function(t,e,o){var n=o*(Math.PI/180),i=t.x+e*Math.cos(n),r=t.y+e*Math.sin(n);return new cc.Vec3(i,r)},r([d(cc.Node)],e.prototype,"buildingBlock",void 0),r([d(cc.Prefab)],e.prototype,"buildingPrefab",void 0),r([d([cc.SpriteFrame])],e.prototype,"spriteFramesUpFace",void 0),r([d([cc.SpriteFrame])],e.prototype,"spriteFramesBuilding",void 0),r([_],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../Enums":"Enums","../Events":"Events","../Global":"Global","../LocalStorage":"LocalStorage","./Building":"Building","./PlayerController":"PlayerController"}],GameOverScreen:[function(t,e,o){"use strict";cc._RF.push(e,"460beyEjLlL743RVCrN5b8q","GameOverScreen");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=t("../Global"),l=cc._decorator,a=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._scoreText=null,e._highScoreText=null,e._popup=null,e._homeBtn=null,e._resetBtn=null,e._resumeBtn=null,e}return i(e,t),e.prototype.onLoad=function(){var t,e,o,n=this;t=this.node.getComponentsInChildren(cc.Label),this._highScoreText=t[0],this._scoreText=t[1],e=this.node.getComponentsInChildren(cc.Button),this._homeBtn=e[0],this._resetBtn=e[1],this._resumeBtn=e[2],this._popup=this.node.children[1],c.eventTarget.on(c.GAME_OVER,this.onShowGameOver,this),this._homeBtn.node.on("click",function(){c.eventTarget.emit(c.SHOW_HOME),n.node.active=!1}),this._resetBtn.node.on("click",function(){c.eventTarget.emit(c.RESET_GAME),n.node.active=!1}),null===(o=this._resumeBtn)||void 0===o||o.node.on("click",function(){c.eventTarget.emit(c.RESUME_GAME),n.node.active=!1}),this.node.active=!1,this.node.position=cc.v3()},e.prototype.onShowGameOver=function(){c.eventTarget.emit(c.FAIL_SOUND),this.node.active=!0,this._scoreText.string="SCORE: "+s.Global.score,this._highScoreText.string="BEST: "+s.Global.highScore,this._popup.scale=0,cc.tween(this._popup).to(.5,{scale:1}).start(),cc.tween(this._homeBtn.node).by(0,{angle:-90}).by(.5,{angle:90}).start(),cc.tween(this._resetBtn.node).by(0,{angle:-90}).by(.5,{angle:90}).start(),this._resumeBtn&&cc.tween(this._resumeBtn.node).by(0,{angle:-90}).by(.5,{angle:90}).start()},r([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../Events":"Events","../Global":"Global"}],GamePlayScreen:[function(t,e,o){"use strict";cc._RF.push(e,"98c8cqOvoxMC6A3XVy0wIrA","GamePlayScreen");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=t("../Global"),l=cc._decorator,a=l.ccclass,p=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.achievementComponentPrefab=null,e.presentComponentPrefab=null,e.coinNode=null,e.bonusContentNode=null,e.bonusNode=null,e.scoreBlock=null,e.levelBlock=null,e._coinText=null,e._titleText=null,e._bonusText=null,e._bonusTexts=["OK","GOOD","PERFECT"],e._scoreText=null,e._highScoreText=null,e._currentLevelText=null,e._nextLevelText=null,e._levelProgress=null,e._bg=null,e.colors=[new cc.Color(90,122,224),new cc.Color(90,122,224),new cc.Color(255,0,51)],e._currentScore=0,e._currentCoint=0,e}return i(e,t),e.prototype.onLoad=function(){var t,e,o;t=this.bonusNode.getComponentsInChildren(cc.Label),this._titleText=t[0],this._bonusText=t[1],e=this.scoreBlock.getComponentsInChildren(cc.Label),this._highScoreText=e[0],this._scoreText=e[1],o=this.levelBlock.getComponentsInChildren(cc.Label),this._currentLevelText=o[0],this._nextLevelText=o[1],this._levelProgress=this.levelBlock.getComponentInChildren(cc.ProgressBar),this._bg=this.bonusNode.getComponentInChildren(cc.Sprite).node,this._coinText=this.coinNode.getComponentInChildren(cc.Label),this.bonusNode.active=!1,c.eventTarget.on(c.SET_SCORE,this.setScore,this),c.eventTarget.on(c.SET_LEVEL,this.setLevel,this),c.eventTarget.on(c.SET_HIGH_SCORE,this.setHighScore,this),c.eventTarget.on(c.GAME_OVER,this.onGameOver,this),c.eventTarget.on(c.RESET_GAME,this.showTopBar,this),c.eventTarget.on(c.RESUME_GAME,this.showTopBar,this),c.eventTarget.on(c.SHOW_BONUS,this.showBonus,this),c.eventTarget.on(c.SET_COIN,this.setCoin,this),this.scoreBlock.opacity=0,this.scoreBlock.scale=0,this.node.position=cc.v3(),this._levelProgress.progress=0},e.prototype.setCoin=function(){var t=s.Global.coinsTotal;this._coinText.string=""+t,this._currentCoint!=t&&(cc.tween(this._coinText.node).to(.1,{scale:3}).to(.3,{scale:1}).start(),this._currentCoint=t)},e.prototype.showBonus=function(t,e,o){this.bonusNode.active=!0,this.bonusNode.opacity=255,this.bonusNode.scale=0,this.bonusContentNode.scale=0,this._bg.color=this.colors[t-1],this._titleText.string=e<2?this._bonusTexts[t-1]:"PERFECT x"+e,this._bonusText.string="+"+o,cc.tween(this.bonusNode).to(.3,{scale:1}).delay(.5).to(.5,{opacity:0}).start(),cc.tween(this.bonusContentNode).to(.2,{scale:2}).to(.1,{scale:1}).start()},e.prototype.onGameOver=function(){cc.tween(this.scoreBlock).to(.5,{opacity:0,scale:0}).start()},e.prototype.showTopBar=function(){this._scoreText.string=""+s.Global.score,this._highScoreText.string="BEST: "+s.Global.highScore,this._levelProgress.progress=0,this.setLevel(),cc.tween(this.scoreBlock).to(.5,{opacity:255,scale:1}).start()},e.prototype.setScore=function(){this.effRunNumber(this._scoreText,this._currentScore,s.Global.score,.5),this._currentScore=s.Global.score;var t=s.Global.level;this._currentLevelText.string=""+t,this._nextLevelText.string=""+(t+1);var e=s.Global.getBuildingByLevel(s.Global.level+1),o=s.Global.getBuildingByLevel(s.Global.level),n=(s.Global.score-o)/(e-o);cc.tween(this._levelProgress).to(.5,{progress:n}).start()},e.prototype.effRunNumber=function(t,e,o,n){if(cc.Tween.stopAllByTarget(t.node),e!==o){t.string=e;var i=o-e,r=i/30;cc.tween(t.node).sequence(cc.tween().call(function(){e+=r,i>0?e>=o&&(e=o,t.node.stopActionByTag(0)):e<=o&&(e=o,cc.Tween.stopAllByTarget(t.node)),t.string=Math.floor(e)}),cc.tween().delay(n/30)).repeat(31).start()}},e.prototype.setHighScore=function(){this._highScoreText.string="BEST: "+s.Global.highScore},e.prototype.setLevel=function(){var t=s.Global.level;this._currentLevelText.string=""+t,this._nextLevelText.string=""+(t+1)},r([p(cc.Prefab)],e.prototype,"achievementComponentPrefab",void 0),r([p(cc.Prefab)],e.prototype,"presentComponentPrefab",void 0),r([p(cc.Node)],e.prototype,"coinNode",void 0),r([p(cc.Node)],e.prototype,"bonusContentNode",void 0),r([p(cc.Node)],e.prototype,"bonusNode",void 0),r([p(cc.Node)],e.prototype,"scoreBlock",void 0),r([p(cc.Node)],e.prototype,"levelBlock",void 0),r([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Events":"Events","../Global":"Global"}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"99f76r4q9VI75VyO3dmcZf9","Global"),Object.defineProperty(o,"__esModule",{value:!0}),o.Global=void 0;var n=function(){function t(){}return t.getBuildingByLevel=function(t){for(var e=0,o=0;o<t;o++)e+=9+o;return e-9},t.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t))+t},t.getBridgePos=function(){var t=this.bridgePoints[this.currentBuilding.buildingType].clone().multiply(cc.v3(this.dirX,1));return this.currentBuilding.node.position.clone().add(t)},t.getDistanceX=function(){return Math.abs(this.nextBuilding.node.position.x-this.currentBuilding.node.position.x)-this.currentBuilding.getBridgePosX()},t.getMaxDistanceX=function(){return this.getDistanceX()+this.nextBuilding.getBridgePosX()},t.angle=30,t.dirX=1,t.currentBuilding=null,t.nextBuilding=null,t.posStart=null,t.spriteFramesBuilding=[],t.spriteFramesUpFace=[],t.bridgePoints=[cc.v3(37,23),cc.v3(34,17),cc.v3(48,28)],t.anchors=[cc.v2(.505,.89),cc.v2(.54,.88),cc.v2(.483,.878)],t.upFacePos=[{v:cc.v3(1.1,1.5),h:cc.v3(.5,1.8)},{v:cc.v3(-1.6,-.2),h:cc.v3(-.3,-.3)},{v:cc.v3(-.3,1.1),h:cc.v3(1.6,1)}],t.score=0,t.highScore=0,t.level=1,t.highLevel=1,t.isGamePlaying=!1,t.isGameOver=!1,t.OFFSET=Math.sqrt(3)/2,t.coinsTotal=0,t.presentsTotal=0,t}();o.Global=n,cc._RF.pop()},{}],HitAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"f6a73/PVdJKArErl4K3vgi6","HitAnimation");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=cc._decorator,l=s.ccclass,a=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._animation=null,e}return i(e,t),e.prototype.onLoad=function(){this._animation=this.node.getComponent(cc.Animation),c.eventTarget.on(c.PLAY_HIT_ANIM,this.playHitAnimation,this)},e.prototype.playHitAnimation=function(t){this.node.setPosition(t),this._animation.play("hit-anim")},r([l],e)}(cc.Component));o.default=a,cc._RF.pop()},{"../Events":"Events"}],HomeScreen:[function(t,e,o){"use strict";cc._RF.push(e,"58c00wFfC1BH5luYCapQ5mh","HomeScreen");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=cc._decorator,l=s.ccclass,a=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._resumeBtn=null,e._playBtn=null,e}return i(e,t),e.prototype.onLoad=function(){var t;t=this.getComponentsInChildren(cc.Button).map(function(t){return t.node}),this._playBtn=t[0],this._resumeBtn=t[1],this._playBtn.on("click",this.onButtonPlayClick,this),this._resumeBtn.on("click",this.onResumeGame,this),c.eventTarget.on(c.SHOW_HOME,this.showHomeScreen,this),this.node.position=cc.v3()},e.prototype.onResumeGame=function(){c.eventTarget.emit(c.RESUME_GAME),this.node.active=!1},e.prototype.onButtonPlayClick=function(){this.node.active=!1,c.eventTarget.emit(c.RESET_GAME)},e.prototype.showHomeScreen=function(){this.node.active=!0},r([l],e)}(cc.Component));o.default=a,cc._RF.pop()},{"../Events":"Events"}],InitBrotherAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"6830f5BElVOiIkInadUQPLC","InitBrotherAnimation");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=cc._decorator,l=s.ccclass,a=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._animation=null,e}return i(e,t),e.prototype.onLoad=function(){this._animation=this.node.getComponent(cc.Animation),c.eventTarget.on(c.INIT_BROTHER_ANIM,this.playAnimation,this)},e.prototype.playAnimation=function(t){this.node.setPosition(t),this._animation.play()},r([l],e)}(cc.Component));o.default=a,cc._RF.pop()},{"../Events":"Events"}],LimitedBar:[function(t,e,o){"use strict";cc._RF.push(e,"84f57WFb2pJlqKq3BSQVYPj","LimitedBar");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=t("../Global"),l=cc._decorator,a=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._progressBar=null,e._progressBarNode=null,e._limited=null,e._height=0,e.OFFSET=20,e}return i(e,t),e.prototype.onLoad=function(){this._progressBar=this.node.getComponentInChildren(cc.ProgressBar),this._progressBarNode=this._progressBar.node,this._limited=this._progressBarNode.children[0],c.eventTarget.on(c.INIT_PROGRESS_BAR,this.initProgressBar,this),c.eventTarget.on(c.HIDE_PROGRESS_BAR,this.hideProgressBar,this),c.eventTarget.on(c.SET_PROGRESS_BAR,this.setProgressBar,this),this.node.opacity=0},e.prototype.setProgressBar=function(t){this._progressBar.progress=t/this._height},e.prototype.initProgressBar=function(t,e){s.Global.level>4||(this._height=t,this._progressBarNode.width=t+this.OFFSET,this._progressBar.totalLength=t+this.OFFSET,this._progressBar.progress=0,this._progressBar.barSprite.node.position=cc.v3((-t-this.OFFSET)/2,0),this._limited.width=e,this._limited.position=cc.v3(t/2,0),cc.tween(this.node).to(.5,{opacity:255,scaleY:500/t}).start())},e.prototype.hideProgressBar=function(){cc.tween(this.node).to(.5,{opacity:0}).start()},r([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../Events":"Events","../Global":"Global"}],LocalStorage:[function(t,e,o){"use strict";cc._RF.push(e,"9c520AjziNCuLU+TvD+mp7i","LocalStorage"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalStorage=o.DataSave=o.BuildingModel=void 0;var n=function(t,e){this.pos=t,this.style=e};o.BuildingModel=n;o.DataSave=function(){this.level=1,this.highLevel=1,this.score=0,this.highScore=0,this.buildingCount=2,this.perfectCount=0,this.scale=1,this.stepX=30.36275740666069,this.stepY=122.49999999999997,this.posX=200,this.posY=263.4999999999999,this.gamePosition=cc.v3(-6.088111963593732,-450),this.dirX=1,this.currentBuilding=new n(cc.v3(-100,119.99999999999991),5),this.nextBuilding=new n(cc.v3(112.17622392718746,242.4999999999999),14)};var i=function(){function t(){}return t.getCoin=function(){return Number(localStorage.getItem(this.GAME_COIN))},t.setCoin=function(t){localStorage.setItem(this.GAME_COIN,t.toString())},t.getPresent=function(){return Number(localStorage.getItem(this.GAME_PRESENT))},t.setPresent=function(t){localStorage.setItem(this.GAME_PRESENT,t.toString())},t.getGameData=function(){return JSON.parse(localStorage.getItem(this.GAME_DATA))},t.setGameData=function(t){localStorage.setItem(this.GAME_DATA,JSON.stringify(t))},t.clear=function(){localStorage.clear()},t.GAME_DATA="SKY_BRIDGE_GAME_DATA",t.GAME_COIN="SKY_BRIDGE_GAME_COIN",t.GAME_PRESENT="SKY_BRIDGE_GAME_PRESENT",t}();o.LocalStorage=i,cc._RF.pop()},{}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"ec7aeofgV9I/48B234sMZIB","Main");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabs=[],e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.prefabs.forEach(function(e){cc.instantiate(e).parent=t.node})},r([l([cc.Prefab])],e.prototype,"prefabs",void 0),r([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],NotTurnsPopup:[function(t,e,o){"use strict";cc._RF.push(e,"30cb2qqw19Hf6uDK29mcZbq","NotTurnsPopup");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scripts/Events"),s=cc._decorator,l=s.ccclass,a=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isCloseToHome=!0,e}return i(e,t),e.prototype.onLoad=function(){var t=this.getComponentsInChildren(cc.Button),e=t[0],o=t[1],n=t[2];e.node.on("click",this.onCloseBtnClicked,this),o.node.on("click",this.onBackToHomeBtnClicked,this),n.node.on("click",this.onShopBtnClicked,this),c.eventTarget.on(c.SHOW_NOT_TURNS_POPUP,this.onShow,this),this.node.active=!1},e.prototype.onCloseBtnClicked=function(){this.node.active=!1,this._isCloseToHome&&window.parent.postMessage("home","*")},e.prototype.onBackToHomeBtnClicked=function(){window.parent.postMessage("home","*"),this.node.active=!1},e.prototype.onShopBtnClicked=function(){window.parent.postMessage("market","*"),this.node.active=!1},e.prototype.onShow=function(t){void 0===t&&(t=!0),this.node.position=cc.v3(0,0,0),this.node.setSiblingIndex(-1),this._isCloseToHome=t,this.node.active=!0},r([l],e)}(cc.Component));o.default=a,cc._RF.pop()},{"../../../Scripts/Events":"Events"}],PlayerController:[function(t,e,o){"use strict";cc._RF.push(e,"95c05RfkR9J5qdnu+qB4p63","PlayerController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],c=0,s=r.length;c<s;c++,i++)n[i]=r[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Events"),l=t("../Global"),a=t("./Brother"),p=cc._decorator,u=p.ccclass,h=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.brotherPrefab=null,e.parentBrother=null,e.parentPlayerDrop=null,e.multiplyScore=null,e._brothers=[],e._targetOutside=null,e._isMoveToEndBridge=!1,e._multiplyScoreText=null,e._parentPlayerMove=null,e._posMove=[],e._animation=null,e._timeMove=1.5,e.BRIDGE="Bridge",e}return i(e,t),e.prototype.onLoad=function(){s.eventTarget.on(s.INIT_PLAYER,this.reset,this),s.eventTarget.on(s.RESET_GAME,this.reset,this),s.eventTarget.on(s.MOVE_TO_TARGET,this.moveToTarget,this),s.eventTarget.on(s.DROP_PLAYER,this.dropPlayer,this),s.eventTarget.on(s.DROP_PLAYER_OUT_SIDE,this.dropPlayerOutside,this),this._parentPlayerMove=this.node.parent,this._multiplyScoreText=this.multiplyScore.getComponentInChildren(cc.Label),this.multiplyScore.active=!1,s.eventTarget.on(s.SHOW_MULTIPLY_SCORE,this.showMultiplyScore,this),this.node.scale=1,this._animation=this.getComponent(cc.Animation),this._siblingIndex=this.node.getSiblingIndex()},e.prototype.update=function(t){this._isMoveToEndBridge&&(this.node.position=this.node.position.add(this._targetOutside.mul(400*t/this._timeMove)),cc.Vec3.distance(this.node.position,l.Global.nextBuilding.node.position)<10&&s.eventTarget.emit(s.CHECK_COLLECTABLE))},e.prototype.showMultiplyScore=function(t){this.multiplyScore.active=!0,this._multiplyScoreText.string="x"+t,this.multiplyScore.position=cc.v3(0,100),this.multiplyScore.opacity=255,this.multiplyScore.scaleX=l.Global.dirX,cc.tween(this.multiplyScore).to(.5,{position:cc.v3(0,200)}).to(.5,{opacity:0,position:cc.v3(0,200)}).start()},e.prototype.dropPlayer=function(t,e){var o=this;void 0===e&&(e=this._timeMove/2),this.setMoveAnim(),cc.tween(this.node).to(e,{position:t}).call(function(){o.setDropAnim()}).delay(.4).call(function(){o.node.parent=o.parentPlayerDrop,o.node.setSiblingIndex(Math.round(e))}).by(1,{position:cc.v3(0,-500,0),opacity:-255}).call(function(){s.eventTarget.emit(s.GAME_OVER),o.node.parent=o._parentPlayerMove}).start()},e.prototype.dropPlayerOutside=function(t){this._targetOutside=t.clone().sub(this.node.position).normalize(),this._isMoveToEndBridge=!0,this.setMoveAnim()},e.prototype.reset=function(){var t=this;this._isMoveToEndBridge=!1,this._targetOutside=null,this.node.position=l.Global.currentBuilding.node.position,this._brothers.forEach(function(e){e.opacity=0,e.position=t.node.position}),this.node.setSiblingIndex(this._siblingIndex+1),this.node.opacity=0,this.setIdleAnim(),cc.tween(this.node).to(.2,{opacity:255}).by(.2,{position:cc.v3(0,20)}).call(function(){t.node.scaleX=l.Global.dirX,t._brothers.forEach(function(t){t.opacity=255})}).by(.2,{position:cc.v3(0,-20)}).start()},e.prototype.moveToTarget=function(t){var e=this;this._posMove=[],l.Global.level>this.parentBrother.children.length+1&&this.parentBrother.children.length<40&&this.initBrother(),this.node.setSiblingIndex(this._siblingIndex);for(var o=t.clone().sub(this.node.position),n=o.mag(),i=40/n,r=o.normalize().mul(n*i),p=0;p<Math.round(1/i)+1;p++)this._posMove.push(this.node.position.clone().add(r.mul(p)));var u=c(this._posMove);for(p=0;p<this._brothers.length;p++){var h=this._brothers[p],_=h.getComponent(a.default);u.pop(),_.movePos=c(u),u.unshift(h.position)}s.eventTarget.emit(s.BROTHER_START_TWEEN,i*this._timeMove),this.setMoveAnim(),cc.tween(this.node).to(this._timeMove,{position:t}).call(function(){return s.eventTarget.emit(s.CHECK_COLLECTABLE)}).by(.2,{position:cc.v3(0,20)}).call(function(){e.node.scaleX=l.Global.dirX,l.Global.isGamePlaying=!0,e.setIdleAnim()}).by(.2,{position:cc.v3(0,-20)}).start(),s.eventTarget.emit(s.MOVE_SOUND)},e.prototype.initBrother=function(){var t,e=cc.instantiate(this.brotherPrefab),o=(null===(t=this._brothers[this._brothers.length-1])||void 0===t?void 0:t.position)||this.node.position;e.getComponent(a.default).init(this.parentBrother,o),s.eventTarget.emit(s.INIT_BROTHER_ANIM,o),this._brothers.push(e)},e.prototype.onCollisionExit=function(t){t.node.name==this.BRIDGE&&this._isMoveToEndBridge&&(this.dropPlayer(this.node.position,0),this._isMoveToEndBridge=!1)},e.prototype.setMoveAnim=function(){this._animation.play("player-move")},e.prototype.setIdleAnim=function(){this._animation.play("player-idle")},e.prototype.setDropAnim=function(){this._animation.play("player-drop")},r([h(cc.Prefab)],e.prototype,"brotherPrefab",void 0),r([h(cc.Node)],e.prototype,"parentBrother",void 0),r([h(cc.Node)],e.prototype,"parentPlayerDrop",void 0),r([h(cc.Node)],e.prototype,"multiplyScore",void 0),r([u],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../Events":"Events","../Global":"Global","./Brother":"Brother"}],PresentComponent:[function(t,e,o){"use strict";cc._RF.push(e,"1e8ccB7sY5GbqsHh7ArHZZL","PresentComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=t("../Global"),l=t("../LocalStorage"),a=t("./DialogComponent"),p=cc._decorator,u=p.ccclass,h=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.presentTotalLabel=null,e._avatar=null,e._openPresentNode=null,e._openPresentBtn=null,e._bgOpenPresentBtn=null,e._presentNode=null,e._spine=null,e._badges=null,e._openLabel=null,e._currentPresent=0,e}return i(e,t),e.prototype.onLoad=function(){var e;t.prototype.onLoad.call(this),e=this._contentDialogNode.children,this._avatar=e[0],this._openPresentNode=e[1],this._presentNode=e[2],this._openLabel=this._openPresentNode.getComponentInChildren(cc.Label),this._openPresentBtn=this._openPresentNode.getComponent(cc.Button),this._bgOpenPresentBtn=this._openPresentNode.children[0],this._openPresentNode.on("click",this.onOpenPresentClick,this),this._dialogNode.on(cc.Node.EventType.TOUCH_START,this.onClosePresentClick,this),this._presentNode.on(cc.Node.EventType.TOUCH_START,this.onClosePresentClick,this),this._presentNode.active=!1,this._spine=this._presentNode.getComponent(sp.Skeleton),this._badges=this.presentTotalLabel.node.parent,c.eventTarget.on(c.SET_PRESENT_TOTAL,this.onSetPresentTotal,this)},e.prototype.onSetPresentTotal=function(){var t=this.getPresentTotal();if(this._badges.active=t>0,this._currentPresent!=t){this.presentTotalLabel.string=t.toString();var e=this._badges.position;cc.tween(this._badges).to(.1,{scale:3,position:cc.v3(e.x,e.y+20)}).to(.2,{scale:1,position:e}).start(),this._currentPresent=t}},e.prototype.onOpenDialogClick=function(){t.prototype.onOpenDialogClick.call(this),this.setOpenLabel()},e.prototype.setOpenLabel=function(){this._openPresentBtn.interactable=this.getPresentTotal()>0,this._openLabel.string=this.getPresentTotal()>0?"M\u1edf("+this.getPresentTotal()+")":"M\u1edf",this._bgOpenPresentBtn.color=this.getPresentTotal()>0?cc.Color.WHITE:cc.Color.GRAY},e.prototype.getPresentTotal=function(){return s.Global.presentsTotal},e.prototype.onClosePresentClick=function(){this._presentNode.active=!1},e.prototype.onOpenPresentClick=function(){var t=this;s.Global.presentsTotal--,l.LocalStorage.setPresent(s.Global.presentsTotal),this.setOpenLabel(),c.eventTarget.emit(c.SET_PRESENT_TOTAL),this._presentNode.active=!0,this._spine.setAnimation(0,"Open",!1),this.scheduleOnce(function(){return t._spine.setAnimation(0,"Idle",!0)},1)},r([h(cc.Label)],e.prototype,"presentTotalLabel",void 0),r([u],e)}(a.default);o.default=_,cc._RF.pop()},{"../Events":"Events","../Global":"Global","../LocalStorage":"LocalStorage","./DialogComponent":"DialogComponent"}],SoundManager:[function(t,e,o){"use strict";cc._RF.push(e,"b1018ueVdlLLYwNLM/Sns3I","SoundManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Events"),s=cc._decorator,l=s.ccclass,a=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgSound=null,e.buildingSound=null,e.bridgeSound=null,e.hitCoinSound=null,e.failSound=null,e.moveSound=null,e.goodSound=null,e.okSound=null,e.perfectSound=null,e.bridgeHitSound=null,e}return i(e,t),e.prototype.onLoad=function(){c.eventTarget.on("BG_SOUND",this.playBgSound,this),c.eventTarget.on("BUILDING_SOUND",this.playBuildingSound,this),c.eventTarget.on("BRIDGE_SOUND",this.playBridgeSound,this),c.eventTarget.on("HIT_COIN_SOUND",this.playHitCoinSound,this),c.eventTarget.on("FAIL_SOUND",this.playFailSound,this),c.eventTarget.on("MOVE_SOUND",this.playMoveSound,this),c.eventTarget.on("GOOD_SOUND",this.playGoodSound,this),c.eventTarget.on("OK_SOUND",this.playOkSound,this),c.eventTarget.on("PERFECT_SOUND",this.playPerfectSound,this),c.eventTarget.on("BRIDGE_HIT_SOUND",this.playBridgeHitSound,this)},e.prototype.playBgSound=function(){this.bgSound.play()},e.prototype.playBuildingSound=function(){this.buildingSound.play()},e.prototype.playBridgeSound=function(){this.bridgeSound.play()},e.prototype.playHitCoinSound=function(){this.hitCoinSound.play()},e.prototype.playFailSound=function(){this.failSound.play()},e.prototype.playMoveSound=function(){this.moveSound.play()},e.prototype.playGoodSound=function(){this.goodSound.play()},e.prototype.playOkSound=function(){this.okSound.play()},e.prototype.playPerfectSound=function(){this.perfectSound.play()},e.prototype.playBridgeHitSound=function(){this.bridgeHitSound.play()},r([a(cc.AudioSource)],e.prototype,"bgSound",void 0),r([a(cc.AudioSource)],e.prototype,"buildingSound",void 0),r([a(cc.AudioSource)],e.prototype,"bridgeSound",void 0),r([a(cc.AudioSource)],e.prototype,"hitCoinSound",void 0),r([a(cc.AudioSource)],e.prototype,"failSound",void 0),r([a(cc.AudioSource)],e.prototype,"moveSound",void 0),r([a(cc.AudioSource)],e.prototype,"goodSound",void 0),r([a(cc.AudioSource)],e.prototype,"okSound",void 0),r([a(cc.AudioSource)],e.prototype,"perfectSound",void 0),r([a(cc.AudioSource)],e.prototype,"bridgeHitSound",void 0),r([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Events":"Events"}],TouchController:[function(t,e,o){"use strict";cc._RF.push(e,"1de58hbbttC8odbVf3C4vRq","TouchController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Events"),s=t("../Global"),l=cc._decorator,a=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isTouchStart=!1,e}return i(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchStart=function(){s.Global.isGamePlaying&&!this._isTouchStart&&(this._isTouchStart=!0,c.eventTarget.emit(c.TOUCH_START))},e.prototype.onTouchEnd=function(){s.Global.isGamePlaying&&this._isTouchStart&&(s.Global.isGamePlaying=!1,this._isTouchStart=!1,c.eventTarget.emit(c.TOUCH_END))},r([a],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../Events":"Events","../Global":"Global"}],main:[function(t,e,o){"use strict";cc._RF.push(e,"e90eeragapAT7oA7uQ79jnG","main");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,l=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headNode=null,e.rightNode=null,e.leftNode=null,e.jarNode=null,e}return i(e,t),e.prototype.start=function(){this.getComponentInChildren(cc.Button).node.on("click",this.reload,this),this.scheduleOnce(this.init,1)},e.prototype.reload=function(){var t=cc.director.getScene().name;cc.director.loadScene(t,function(){console.log("Scene reloaded:",t)})},e.prototype.init=function(){cc.tween(this.headNode).to(2,{width:0,position:cc.v3(-100)}).to(2,{width:60,position:cc.v3(-140)}).start(),cc.tween(this.leftNode).to(4,{width:200,position:cc.v3(0)}).start(),cc.tween(this.rightNode).to(0,{width:0,position:cc.v3(50)}).to(4,{width:60}).start(),cc.tween(this.jarNode).repeatForever(cc.tween(this.jarNode).to(0,{position:cc.v3(462,0,0)}).to(4,{position:cc.v3(-462,0,0)})).start()},r([l(cc.Node)],e.prototype,"headNode",void 0),r([l(cc.Node)],e.prototype,"rightNode",void 0),r([l(cc.Node)],e.prototype,"leftNode",void 0),r([l(cc.Node)],e.prototype,"jarNode",void 0),r([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}]},{},["NotTurnsPopup","Enums","Events","Bridge","BridgeController","Brother","Building","CollectableController","GameController","HitAnimation","InitBrotherAnimation","PlayerController","TouchController","Global","LocalStorage","Main","SoundManager","AchievementComponent","AchievementPopup","DialogComponent","GameOverScreen","GamePlayScreen","HomeScreen","LimitedBar","PresentComponent","main"]);